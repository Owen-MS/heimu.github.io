<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1、在 js 中有浮点数运算不正确的时候，比如 0.1 + 0.2 不等于 0.3 这是什么原因，要怎么解决 | 黑木小课堂开课了</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="waiting for some one">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.2dd55903.css" as="style"><link rel="preload" href="/Blog/assets/js/app.2735e033.js" as="script"><link rel="preload" href="/Blog/assets/js/2.b01d3673.js" as="script"><link rel="preload" href="/Blog/assets/js/48.14af8f3b.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.b877bee2.js"><link rel="prefetch" href="/Blog/assets/js/11.5ada95b3.js"><link rel="prefetch" href="/Blog/assets/js/12.30354b1f.js"><link rel="prefetch" href="/Blog/assets/js/13.95eae7c7.js"><link rel="prefetch" href="/Blog/assets/js/14.cccdcf95.js"><link rel="prefetch" href="/Blog/assets/js/15.69e7d0dd.js"><link rel="prefetch" href="/Blog/assets/js/16.057b3601.js"><link rel="prefetch" href="/Blog/assets/js/17.e83a8852.js"><link rel="prefetch" href="/Blog/assets/js/18.ca069b30.js"><link rel="prefetch" href="/Blog/assets/js/19.0a908919.js"><link rel="prefetch" href="/Blog/assets/js/20.9a915d6e.js"><link rel="prefetch" href="/Blog/assets/js/21.d5921631.js"><link rel="prefetch" href="/Blog/assets/js/22.bebb4fcf.js"><link rel="prefetch" href="/Blog/assets/js/23.51e08edc.js"><link rel="prefetch" href="/Blog/assets/js/24.51e1d5d7.js"><link rel="prefetch" href="/Blog/assets/js/25.3b5248df.js"><link rel="prefetch" href="/Blog/assets/js/26.6e603482.js"><link rel="prefetch" href="/Blog/assets/js/27.79720c58.js"><link rel="prefetch" href="/Blog/assets/js/28.3c8fc6fa.js"><link rel="prefetch" href="/Blog/assets/js/29.e0656687.js"><link rel="prefetch" href="/Blog/assets/js/3.c1294b69.js"><link rel="prefetch" href="/Blog/assets/js/30.6d2243b3.js"><link rel="prefetch" href="/Blog/assets/js/31.87948d72.js"><link rel="prefetch" href="/Blog/assets/js/32.806f536f.js"><link rel="prefetch" href="/Blog/assets/js/33.3d90b9a0.js"><link rel="prefetch" href="/Blog/assets/js/34.a1d19065.js"><link rel="prefetch" href="/Blog/assets/js/35.3f72b695.js"><link rel="prefetch" href="/Blog/assets/js/36.dcc38f8e.js"><link rel="prefetch" href="/Blog/assets/js/37.0bb65fa6.js"><link rel="prefetch" href="/Blog/assets/js/38.087596ab.js"><link rel="prefetch" href="/Blog/assets/js/39.fd484df2.js"><link rel="prefetch" href="/Blog/assets/js/4.9d5a9848.js"><link rel="prefetch" href="/Blog/assets/js/40.d80d7d3b.js"><link rel="prefetch" href="/Blog/assets/js/41.e28ac32d.js"><link rel="prefetch" href="/Blog/assets/js/42.3f785691.js"><link rel="prefetch" href="/Blog/assets/js/43.a7385a7e.js"><link rel="prefetch" href="/Blog/assets/js/44.928b7260.js"><link rel="prefetch" href="/Blog/assets/js/45.78acc165.js"><link rel="prefetch" href="/Blog/assets/js/46.eabee6bb.js"><link rel="prefetch" href="/Blog/assets/js/47.fa225d23.js"><link rel="prefetch" href="/Blog/assets/js/49.07fcd7be.js"><link rel="prefetch" href="/Blog/assets/js/5.58efccfc.js"><link rel="prefetch" href="/Blog/assets/js/50.8911dea2.js"><link rel="prefetch" href="/Blog/assets/js/51.2726b335.js"><link rel="prefetch" href="/Blog/assets/js/52.1652495d.js"><link rel="prefetch" href="/Blog/assets/js/53.463252b7.js"><link rel="prefetch" href="/Blog/assets/js/54.e4fdefd2.js"><link rel="prefetch" href="/Blog/assets/js/55.2b8f89ad.js"><link rel="prefetch" href="/Blog/assets/js/56.90bf6d2b.js"><link rel="prefetch" href="/Blog/assets/js/57.ac033afd.js"><link rel="prefetch" href="/Blog/assets/js/58.6167bbd7.js"><link rel="prefetch" href="/Blog/assets/js/59.a5750d94.js"><link rel="prefetch" href="/Blog/assets/js/6.e91da983.js"><link rel="prefetch" href="/Blog/assets/js/60.efa04816.js"><link rel="prefetch" href="/Blog/assets/js/61.26d8c9e1.js"><link rel="prefetch" href="/Blog/assets/js/62.575143cc.js"><link rel="prefetch" href="/Blog/assets/js/63.92cee35a.js"><link rel="prefetch" href="/Blog/assets/js/64.c3d71681.js"><link rel="prefetch" href="/Blog/assets/js/65.cb6918b0.js"><link rel="prefetch" href="/Blog/assets/js/66.903f40eb.js"><link rel="prefetch" href="/Blog/assets/js/67.16403f34.js"><link rel="prefetch" href="/Blog/assets/js/68.5839aaa5.js"><link rel="prefetch" href="/Blog/assets/js/69.16cebd8b.js"><link rel="prefetch" href="/Blog/assets/js/7.5f40a980.js"><link rel="prefetch" href="/Blog/assets/js/70.ac20d980.js"><link rel="prefetch" href="/Blog/assets/js/71.35db8096.js"><link rel="prefetch" href="/Blog/assets/js/72.54c3f241.js"><link rel="prefetch" href="/Blog/assets/js/73.3b8f33d8.js"><link rel="prefetch" href="/Blog/assets/js/74.7675fa60.js"><link rel="prefetch" href="/Blog/assets/js/75.6130fe3a.js"><link rel="prefetch" href="/Blog/assets/js/8.e008de5e.js"><link rel="prefetch" href="/Blog/assets/js/9.d6e025bf.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.2dd55903.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">黑木小课堂开课了</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/Blog/web/react/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/web/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/dataStructure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程" class="dropdown-title"><span class="title">工程</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程" class="mobile-dropdown-title"><span class="title">工程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/wheel/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/collect/skuPath/" class="nav-link">
  skuPath
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/JS/" class="nav-link">
  JS常见手写题
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/一套面试题/" class="nav-link">
  一套面试题
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/草稿面试题/" class="nav-link">
  草稿面试题
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/错误监控及上报/" class="nav-link">
  错误监控
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/100/" class="nav-link">
  前端100问
</a></div><div class="nav-item"><a href="/Blog/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/Blog/diary/" class="nav-link">
  随笔
</a></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/Owen-MS/Blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/Blog/web/react/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/web/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/dataStructure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程" class="dropdown-title"><span class="title">工程</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程" class="mobile-dropdown-title"><span class="title">工程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/wheel/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/collect/skuPath/" class="nav-link">
  skuPath
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/JS/" class="nav-link">
  JS常见手写题
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/一套面试题/" class="nav-link">
  一套面试题
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/草稿面试题/" class="nav-link">
  草稿面试题
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/错误监控及上报/" class="nav-link">
  错误监控
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/100/" class="nav-link">
  前端100问
</a></div><div class="nav-item"><a href="/Blog/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/Blog/diary/" class="nav-link">
  随笔
</a></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/Owen-MS/Blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1、在-js-中有浮点数运算不正确的时候-比如-0-1-0-2-不等于-0-3-这是什么原因-要怎么解决"><a href="#_1、在-js-中有浮点数运算不正确的时候-比如-0-1-0-2-不等于-0-3-这是什么原因-要怎么解决" class="header-anchor">#</a> 1、在 js 中有浮点数运算不正确的时候，比如 0.1 + 0.2 不等于 0.3 这是什么原因，要怎么解决</h2> <p>在 JavaScript 中，浮点数运算不正确的现象是由于浮点数精度问题导致的。这是由于计算机内部以二进制表示浮点数，
而某些十进制小数在二进制中无法精确表示。因此，当进行浮点数运算时，可能会出现微小的舍入误差，导致看似相等的数值在计算机内部并不相等。
1、使用整数进行计算 var result = (0.1 * 10 + 0.2 * 10) / 10; // 0.3
2、使用toFixed方法 var result = (0.1 + 0.2).toFixed(1); // &quot;0.3&quot;</p> <h2 id="_2、webpack中-loader-与-plugin-有什么区别"><a href="#_2、webpack中-loader-与-plugin-有什么区别" class="header-anchor">#</a> 2、webpack中 loader 与 plugin 有什么区别</h2> <p>在 webpack 中，loader 和 plugin 是两个不同的概念，用于实现不同的功能。</p> <p>Loader：</p> <p>作用：Webpack 中的 loader 用于对模块的源代码进行转换。它允许你在导入模块时预处理文件。这使得你可以将非 JavaScript 文件（如 TypeScript、Sass、Less 等）转换为 JavaScript，或对 JavaScript 进行额外处理（如 Babel 将 ES6+ 代码转换为 ES5）。
配置：在 webpack 的配置中，可以通过 module.rules 字段来配置 loader。每个 loader 需要指定一个 test 属性，用于匹配需要被转换的文件类型，并且指定要使用的 loader。
示例：比如可以使用 css-loader 来处理 CSS 文件，file-loader 来处理文件加载，babel-loader 来处理 JavaScript 文件等。
Plugin：</p> <p>作用：Plugin 用于执行一些在打包过程中的额外任务，例如打包优化、资源管理、注入环境变量等。Plugin 可以拓展 webpack 的功能，以解决 loader 无法实现的其他自动化任务。它们的功能更加广泛，可以访问整个构建过程，在构建过程中的任何时候执行自定义任务。
配置：在 webpack 的配置中，通过 plugins 字段来配置插件。每个插件通常是一个类的实例，在配置中实例化并添加到 plugins 数组中。
示例：比如 HtmlWebpackPlugin 可以自动生成 HTML 文件，并将打包后的资源自动引入其中，CommonsChunkPlugin 可以提取公共代码，MiniCssExtractPlugin 可以将 CSS 提取为独立的文件等。</p> <p>总的来说，loader 用于转换模块的源代码，而 plugin 则用于执行更广泛的构建任务和对输出结果进行处理。使用 loader 和 plugin 可以帮助你更灵活、高效地配置和管理 webpack 项目。</p> <h2 id="_3、在-react-类组件中-为什么修改状态要使用-setstate-而不是用-this-state-xxx-xxx"><a href="#_3、在-react-类组件中-为什么修改状态要使用-setstate-而不是用-this-state-xxx-xxx" class="header-anchor">#</a> 3、在 React 类组件中，为什么修改状态要使用 setState 而不是用 this.state.xxx = xxx</h2> <p>在 React 类组件中，修改状态应该使用 setState() 方法而不是直接修改 this.state.xxx。这是因为直接修改 this.state 不会触发 React 的重新渲染机制，而 setState() 方法则会。</p> <p>异步更新：setState() 方法是异步的，它将状态更新放入队列中，以确保性能优化和批量更新。如果你直接修改 this.state，React 无法掌握状态的变化，可能导致不可预料的行为。</p> <p>批量更新：React 会对 setState() 进行批量更新，这意味着在一次事件循环中，React 会合并多个 setState() 调用，然后一次性更新组件。如果直接修改 this.state，React 将无法执行批量更新，可能会导致性能问题。</p> <p>状态合并：setState() 会将新的状态与当前状态进行合并，只更新你指定的状态属性，而不影响其他状态。如果你直接修改 this.state，可能会覆盖掉其他状态属性，导致不一致性。</p> <p>生命周期触发：setState() 的调用会触发组件的生命周期方法，包括 shouldComponentUpdate 和 componentDidUpdate，这样可以确保组件在状态更新后能够正确地响应。</p> <p>因此，为了确保 React 组件状态的正确更新和组件的正确渲染，应该始终使用 setState() 方法来修改状态。</p> <h2 id="_4、setstate到底是同步还是异步"><a href="#_4、setstate到底是同步还是异步" class="header-anchor">#</a> 4、setState到底是同步还是异步</h2> <p>setState并不是真正意义上的异步操作，它只是模拟了异步的行为。
React中会去维护一个标识（isBatchingUpdates），判断是直接更新还是先暂存state进队列。
setTimeout以及原生事件都会直接去更新state，因此可以立即得到最新state。
而合成事件和React生命周期函数中，是受React控制的，其会将isBatchingUpdates设置为 true，从而走的是类似异步的那一套。</p> <p>setState 只在合成事件和钩子函数中是“异步”的，在原生事件和 setTimeout 中都是同步的。</p> <p>setState的“异步”并不是说内部由异步代码实现，其实本身执行的过程和代码都是同步的，只是合成事件和钩子函数的调用顺序在更新之前，导致在合成事件和钩子函数中没法立马拿到更新后的值，形式了所谓的“异步”，
当然可以通过第二个参数 setState(partialState, callback) 中的callback拿到更新后的结果。</p> <p>setState 的批量更新优化也是建立在“异步”（合成事件、钩子函数）之上的，在原生事件和setTimeout 中不会批量更新，在“异步”中如果对同一个值进行多次 setState ，
setState 的批量更新策略会对其进行覆盖，取最后一次的执行，如果是同时 setState 多个不同的值，在更新时会对其进行合并批量更新。</p> <h2 id="_5、usestate-的原理是什么-背后怎么执行的-它怎么保证一个组件中写多个-usestate-不会串行"><a href="#_5、usestate-的原理是什么-背后怎么执行的-它怎么保证一个组件中写多个-usestate-不会串行" class="header-anchor">#</a> 5、useState 的原理是什么，背后怎么执行的，它怎么保证一个组件中写多个 useState 不会串行</h2> <p>useState是React中用于在函数组件中添加状态的hook。
原理：</p> <ul><li>闭包。 每次函数执行都会创建一个闭包环境。这个闭包包含函数组件所有的局部变量，包括useState定义的状态以及其更新的函数。</li> <li>Hooks调度机制。调度机制保证Hooks按照正确的顺序执行，以及确保组件状态能够正确的触发重新渲染。（链表）</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/22/2024, 8:20:34 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Blog/assets/js/app.2735e033.js" defer></script><script src="/Blog/assets/js/2.b01d3673.js" defer></script><script src="/Blog/assets/js/48.14af8f3b.js" defer></script>
  </body>
</html>
